KISSY.add(function(t){function e(e,a){this.container=t.one(e),this.setting=t.merge(n,a),this.curIndex=0,this.len=this.container.all(this.setting.onepageSection).length}var n={onepageSection:"section",pageNav:!0,minTime:500};return e.prototype.init=function(){this.container.addClass("onepageWrapper"),this.container.all(this.setting.onepageSection).addClass("singleSection"),this.setting.pageNav&&this.initPageNav();var n=t.throttle(e.prototype.moveDown,this.setting.minTime,this);up=t.throttle(e.prototype.moveUp,this.setting.minTime,this),t.one(document).on("mousewheel swip",function(t){t.halt(),t.deltaY<0?n():t.deltaY>0&&up()})},e.prototype.initPageNav=function(){for(var e="<ul class = 'page-nav'>",n=0,a=this.len;a>n;n++)e+="<li class = 'nav-item' data-index = '"+n+"'><a><span class = 'dot' data-index = '"+n+"'></span></a></li>";e+="</ul>";var i=t.Node(e);t.one("body").prepend(i);var s=this;i.on("click",function(e){var n=t.Node(e.target).attr("data-index");void 0!==n&&n!=s.curIndex&&(t.Node(t.all(".dot")[s.curIndex]).removeClass("active"),s.curIndex=parseInt(n),s.container.css("transform","translate3d(0,"+-100*s.curIndex+"%,0)"),t.Node(t.all(".dot")[s.curIndex]).addClass("active"))}),t.Node(t.all(".dot")[this.curIndex]).addClass("active")},e.prototype.moveDown=function(){this.curIndex+1<this.len&&(t.Node(t.all(".dot")[this.curIndex]).removeClass("active"),this.curIndex+=1,this.container.css("transform","translate3d(0,"+-100*this.curIndex+"%,0)"),t.Node(t.all(".dot")[this.curIndex]).addClass("active"))},e.prototype.moveUp=function(){this.curIndex-1>=0&&(t.Node(t.all(".dot")[this.curIndex]).removeClass("active"),this.curIndex-=1,this.container.css("transform","translate3d(0,"+-100*this.curIndex+"%,0)"),t.Node(t.all(".dot")[this.curIndex]).addClass("active"))},e},{requires:["node"]});